process split_bed {
    input:
    path bed_file

    output:
    path "chunk*.bed", emit : bed_chunks

def pam
def divider
    switch (params.casName) {
    case "SpCas9":
        pam = "NGG"
        break
    case "SpCas9-NG":
        pam = "NGN"
        break
    case "SpCas9-NRRH":
        pam = "NRRH"
        break
    case "SpCas9-NRTH":
        pam = "NRTH"
        break
    case "SpCas9-NRCH":
        pam = "NRCH"
        break
    case "SpCas9(VQR/VRQR)":
        pam = "NGA"
        break
    case "xCas9":
        pam = "NGN"
        break
    case "SpG":
        pam = "NGN"
        break
    case "SpRY":
        pam = "NNN"
        break
    case "SpCas9-CP1012":
        pam = "NGG"
        break
    case "SpCas9-CP1028":
        pam = "NGG"
        break
    case "SpCas9-CP1041":
        pam = "NGG"
        break
    case "SpCas9-1249":
        pam = "NGG"
        break
    case "SpCas9-(HF1/HF2)":
        pam = "NGG"
        break
    case "eSpCas9":
        pam = "NGG"
        break
    case "HypaCas9":
        pam = "NGG"
        break
    case "Sniper-Cas9":
        pam = "NGG"
        break
    case "evoCas9":
        pam = "NGG"
        break
    case "ScCas9":
        pam = "NNG"
        break
    case "ScCas9+":
        pam = "NNG"
        break
    case "Spymac":
        pam = "NAA"
        break
    case "iSpymac":
        pam = "NAA"
        break
    case "SaCas9":
        pam = "NNGRRT"
        break
    case "SaCas9-KKH":
        pam = "NNNRRT"
        break
    case "St1Cas9-LMD9":
        pam = "NNRGAA"
        break
    case "SauriCas9":
        pam = "NNGG"
        break
    case "CjCas9":
        pam = "NNNNNRYAC"
        break
    case "LbCas12a":
        pam = "TTTV"
        break
    case "LbCas12a-RVRR":
        pam = "RVRR"
        break
    case "AsCas12a":
        pam = "TTTV"
        break
    case "enAsCas12a":
        pam = "TTNN"
        break
    default:
        pam = "Unknown"
        pam='NNN'
        break
}


 script:
    """
    split_bed.py ${bed_file} --bp_limit ${params.soft_bp_limit} --overlap 30
    """
}
